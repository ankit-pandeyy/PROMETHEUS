groups:
- name: alert.rules1
  rules:
  - alert: NodeDown
    expr: up == 0 
    for: 10s
    labels:
      severity: "critical"
      group: Mymail
    annotations:
      summary: "Node {{ $labels.instance }} down"

- name: alert.rules2
  rules:
  - alert: Diskusage
    expr:  100 * (1-(node_filesystem_free_bytes{fstype=~"ext4|xfs", mountpoint !~"/database.*|/mysqldata.*|/logbackup"} / node_filesystem_size_bytes{fstype=~"ext4|xfs", mountpoint !~"/database.*|/mysqldata.*|/logbackup"})) > 50
    for: 10s
    labels:
      severity: "critical"
      group: Mymail
    annotations:
      summary: "High Disk Usage (instance {{ $labels.instance }})"
      description: "Disk Usage is > 50%\n  VALUE = {{ $value }}\n  LABELS: {{ $labels }}"
      instance: '{{ $labels.instance }}'



- name: alert.rules3
  rules:
  - alert: EndPointDown
    expr:  probe_success == 0
    for: 10s
    labels:
      severity: "critical"
      group: Mymail
    annotations:
      summary: "END POINT {{ $labels.instance }} down"
